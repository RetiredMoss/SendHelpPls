<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <h1>Grade Calculator</h1>
    <form id="gradeForm" onsubmit="return false;">
        <label for="prelim_grade">Enter your Preliminary Grade:</label>
        <input type="number" id="prelim_grade" name="prelim_grade" min="0" max="100" required>
        <button type="submit" id="calculateButton">Calculate</button>
    </form>
    <div id="result"></div>

    <py-script>
        from pyscript import Element

        def calculate_required_grades(prelim_grade):
            passing_grade = 75
            prelim_weight = 0.20
            midterm_weight = 0.30
            final_weight = 0.50
            deanslist_grade = 90

            if not (0 <= prelim_grade <= 100):
                return "Error: Preliminary grade must be between 0 and 100."

            current_total = prelim_grade * prelim_weight
            required_total = passing_grade - current_total
            min_required_average = required_total / (midterm_weight + final_weight)

            message = ""

            if prelim_grade >= passing_grade:
                message += f"You need a {min_required_average:.2f}% average on the Midterms and Finals to pass."
                if prelim_grade >= deanslist_grade:
                    message += " You already qualify for Dean's Lister! Keep up the great work!"
                else:
                    deanslist_total = deanslist_grade - current_total
                    min_deanslist_average = deanslist_total / (midterm_weight + final_weight)
                    message += f" To qualify for Dean's Lister, you need a Midterm grade of {min_deanslist_average:.2f}% and a Final grade of {min_deanslist_average:.2f}%."
            else:
                if min_required_average > 100:
                    return "Error: Achieving the passing grade is not possible with this preliminary score."

                deanslist_total = deanslist_grade - current_total
                min_deanslist_average = deanslist_total / (midterm_weight + final_weight)

                message += f"You need a {min_required_average:.2f}% average on the Midterms and Finals to pass. "
                message += f"You need a Midterm grade of {min_deanslist_average:.2f}% and a Final grade of {min_deanslist_average:.2f}% to qualify for Dean's Lister."

            return message

        def calculate(event):
            prelim_grade = float(Element("prelim_grade").element.value)
            result_message = calculate_required_grades(prelim_grade)
            Element("result").element.innerText = result_message

        # Attach the calculate function to the button click
        calculate_button = Element("calculateButton")
        calculate_button.element.onclick = calculate
    </py-script>
</body>
</html>

